function VideoBackground(a,b){var c;-1!=a.indexOf("youtube.com/")?(this.source=VideoSourceYoutube,this.id=a.slice(a.indexOf("embed")+6),c=VideoBackground.prototype.youtube):-1!=a.indexOf("vimeo.com/")?(this.source=VideoSourceVimeo,this.id=a.slice(a.indexOf("vimeo.com/video/")+16),c=VideoBackground.prototype.vimeo):(this.source=VideoSourceMP4,c=VideoBackground.prototype.mp4),VideoBackground.prototype.addVideoBackground=c.addVideoBackground,VideoBackground.prototype.ready=c.ready,VideoBackground.prototype.onStateChange=c.onStateChange,VideoBackground.prototype.error=c.error,VideoBackground.prototype.onPlay=c.onPlay,VideoBackground.prototype.onPause=c.onPause,VideoBackground.prototype.onFinish=c.onFinish,this.url=a,this.format=VideoFormatUnknown,this.fixed=0!=b.fixed,this.controls=void 0!==b.controls&&0!=b.controls,this.loop=void 0===b.loop||0!=b.loop,this.autoplay=void 0===b.autoplay||0!=b.autoplay,this.audio=void 0!==b.audio&&0!=b.audio,this.poster=b.poster,this.width=b.width,this.height=b.height,$(window).data("video_background",this),this.addVideoContainer(),$(window).resize(this.resize)}function oEmbed(a){var b=$(window).data("video_background");b.width=a.width,b.height=a.height,b.insertJS("https://f.vimeocdn.com/js/froogaloop2.min.js",function(){b.vimeoPlayerReady()}),$(window).resize(b.resize)}function onYouTubeIframeAPIReady(){var a=$(window).data("video_background");player=new YT.Player("video_background",{videoId:a.id,playerVars:{autohide:1,autoplay:a.autoplay,disablekb:1,cc_load_policy:0,controls:a.controls,enablejsapi:1,fs:0,modestbranding:1,origin:window.location.origin||window.location.protocol+"//"+window.location.hostname,iv_load_policy:0,showinfo:0,rel:0,wmode:"opaque",hd:0},events:{onReady:a.ready,onStateChange:a.onStateChange,onError:a.error}})}var VideoSourceUnknown=0,VideoSourceYoutube=1,VideoSourceVimeo=2,VideoSourceMP4=16,VideoFormatUnknown=0,VideoFormat4_3=1,VideoFormat16_9=2,VideoFormatCustom=16,player;VideoBackground.prototype.youtube={addVideoBackground:function(){var a=$(window).data("video_background");this.addVideoMask(),$("#video_background_container").append('<div id="video_background" style="display: none;"></div>'),a.insertJS("https://www.youtube.com/player_api")},ready:function(a){var b=$(window).data("video_background");b.resize(),b.show(),b.audio||player.mute()},onStateChange:function(a){if(a.data===YT.PlayerState.ENDED){var b=$(window).data("video_background");b.loop&&player.playVideo()}},error:function(a){throw a},onPlay:function(a){},onPause:function(a){},onFinish:function(a){}},VideoBackground.prototype.vimeo={addVideoBackground:function(){var a=$(window).data("video_background");this.addVideoMask(),$("#video_background_container").append('<iframe id="video_background" frameborder="0" style="top: -9999px;"></iframe>'),a.insertJS("http://vimeo.com/api/oembed.json?url="+encodeURIComponent(this.url)+"&callback=oEmbed")},ready:function(a){var b=$(window).data("video_background");b.resize(),b.show(),b.audio||player.api("setVolume",0)},onStateChange:function(a){},error:function(a){throw a},onPlay:function(a){},onPause:function(a){},onFinish:function(a){}},VideoBackground.prototype.mp4={addVideoBackground:function(){var a=$(window).data("video_background");$("#video_background_container").append('<video style="display: none;" id="video_background"'+(a.loop?" loop":"")+'><source src="'+a.url+'" type="video/mp4"></video>'),player=$("#video_background"),player.on("canplay",function(){a.ready(),a.autoplay&&document.getElementById("video_background").play()}),player.on("play",a.onPlay),player.on("pause",a.onPause),player.on("ended",a.onFinish),player.on("error",a.error)},ready:function(a){var b=$(window).data("video_background");b.resize(),b.show(),b.audio||$(player).prop("muted",!0)},onStateChange:function(a){},error:function(a){throw a},onPlay:function(a){},onPause:function(a){},onFinish:function(a){}},VideoBackground.prototype.addVideoContainer=function(){var a=$(window).data("video_background");$("body").prepend('<div id="video_background_container" style="z-index: -99999; top: -0px; left: 0px; bottom: 0px; right: 0px; overflow: hidden;"></div>'),$("#video_background_container").css("position",a.fixed?"fixed":"absolute"),a.poster&&($("#video_background_container").css("background-image","url("+a.poster+")"),$("#video_background_container").css("background-size","cover"),$("#video_background_container").width($(window).width()),$("#video_background_container").height($(window).height()))},VideoBackground.prototype.addVideoMask=function(){var a=$(window).data("video_background");$("body").prepend('<div id="video_background_mask" style="z-index: -99998; top: 0px; left: 0px; bottom: 0px; right: 0px; overflow: hidden;"></div>'),$("#video_background_mask").css("position",a.fixed?"fixed":"absolute")},VideoBackground.prototype.show=function(){$("#video_background").show()},VideoBackground.prototype.resize=function(){var a=$(window).data("video_background"),b=void 0!==a.width?a.width:$("#video_background").width(),c=void 0!==a.height?a.height:$("#video_background").height();a.format==VideoFormatUnknown&&(b/4==c/3?(a.format=VideoFormat4_3,a.ratio=4/3):b/16==c/9?(a.format=VideoFormat16_9,a.ratio=16/9):(a.format=VideoFormatCustom,a.ratio=b/c));var f,g,d=$(window).width(),e=$(window).height(),h=d/e;h>a.ratio?(f=d,g=f/a.ratio):(g=e,f=g*a.ratio),a.controls||(f*=1.2,g*=1.2);var i=(d-f)/2,j=(e-g)/2;$("#video_background_container").width(d),$("#video_background_container").height(e),$("#video_background_container").offset({top:0,left:0}),$("#video_background_mask").width(d),$("#video_background_mask").height(e),$("#video_background").width(f),$("#video_background").height(g),$("#video_background").offset({top:j,left:i})},VideoBackground.prototype.insertJS=function(a,b){var c=document.createElement("script");b&&(c.readyState?c.onreadystatechange=function(){("loaded"===c.readyState||"complete"===c.readyState)&&(c.onreadystatechange=null,b())}:c.onload=b),c.src=a;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)},VideoBackground.prototype.isMobile=function(){return navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)?!0:!1},VideoBackground.prototype.vimeoPlayerReady=function(){var a=$(window).data("video_background"),b=$("#video_background")[0];player=$f(b),player.addEvent("ready",function(){a.ready(),a.isMobile()?a.onPlay():(player.addEvent("play",a.onPlay),player.addEvent("pause",a.onPause),player.addEvent("finish",a.onFinish)),player.api("play")}),$(b).attr("src",("file:"==window.location.protocol?"https:":window.location.protocol)+"//player.vimeo.com/video/"+a.id+"?api=1&player_id=video_background&title=0&byline=0&portrait=0&playbar=0&loop="+a.loop+"&autoplay="+a.autoplay)};